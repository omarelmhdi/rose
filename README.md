# ๐ค ุจูุช ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช ุงููุชูุฏู

ุจูุช ุชููุฌุฑุงู ุงุญุชุฑุงูู ูุฅุฏุงุฑุฉ ุงููุฌููุนุงุช ูุน ููุฒุงุช ูุชูุฏูุฉุ ูุทูุฑ ุจุงุณุชุฎุฏุงู Python ู aiogram 3.x ูุน ูุงุนุฏุฉ ุจูุงูุงุช Supabase.

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ก๏ธ ุงูุญูุงูุฉ ูุงูุฃูุงู
- **ููุงูุญุฉ ุงูุณุจุงู ุงูุชููุงุฆู** - ูุชู ุงููุณุชุฎุฏููู ุนูุฏ ุชุฌุงูุฒ ุญุฏ ุงูุฑุณุงุฆู
- **ููุน ุงูุฑูุงุจุท** - ุญุฐู ุงูุฑูุงุจุท ุบูุฑ ุงููุฑุบูุจ ูููุง ูุน ุฅููุงููุฉ ุฅุถุงูุฉ ุงุณุชุซูุงุกุงุช
- **ููุน ุงููููุงุช ุงููุญุธูุฑุฉ** - ููุชุฑุฉ ุงููููุงุช ุบูุฑ ุงูููุงุณุจุฉ
- **ูุธุงู ุงูุชุญุฐูุฑุงุช** - ุชุญุฐูุฑุงุช ุชุฑุงูููุฉ ูุน ุนููุจุงุช ุชููุงุฆูุฉ

### ๐ฎโโ๏ธ ุงูุฃูุงูุฑ ุงูุฅุฏุงุฑูุฉ
- **ุญุธุฑ/ุฅูุบุงุก ุญุธุฑ** - ุฅุฏุงุฑุฉ ุดุงููุฉ ููุนุถููุงุช
- **ูุชู/ุฅูุบุงุก ูุชู** - ูุน ุฏุนู ุงููุฏุฉ ุงูุฒูููุฉ
- **ุทุฑุฏ ุงูุฃุนุถุงุก** - ุฅุฒุงูุฉ ูุคูุชุฉ ูู ุงููุฌููุนุฉ
- **ุชุซุจูุช ุงูุฑุณุงุฆู** - ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู ุงููุซุจุชุฉ
- **ูุธุงู ุงูุฑุชุจ** - ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ูุฎุตุตุฉ

### ๐ ุงูุชุฑุญูุจ ูุงูุชูุงุนู
- **ุฑุณุงุฆู ุชุฑุญูุจ ูุงุจูุฉ ููุชุฎุตูุต** - ูุน ูุชุบูุฑุงุช ุฏููุงููููุฉ
- **ุฃุฒุฑุงุฑ ุชูุงุนููุฉ** - ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู
- **ูุนุงููุฉ ุงูุฑุณุงุฆู** - ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ูุจู ุงูุชุทุจูู

### ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
- **ุฅุญุตุงุฆูุงุช ุดุงููุฉ** - ุฃุนุถุงุกุ ุฃูุดุทุฉุ ุฅุฌุฑุงุกุงุช
- **ุชุชุจุน ุงูุฃูุดุทุฉ** - ูุฑุงูุจุฉ ุชูุงุนู ุงูุฃุนุถุงุก
- **ุชูุงุฑูุฑ ุฏูุฑูุฉ** - ููุฎุตุงุช ุงูุฃุฏุงุก

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ูุชุทูุจุงุช ุงููุธุงู
```bash
Python 3.8+
PostgreSQL (ูู ุฎูุงู Supabase)
Redis (ุงุฎุชูุงุฑู ูููุงุด)
```

### 2. ุชุญููู ุงููุดุฑูุน
```bash
git clone <repository-url>
cd telegram_bot
```

### 3. ุชุซุจูุช ุงููุชุทูุจุงุช
```bash
pip install -r requirements.txt
```

### 4. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ุงูุณุฎ ููู `.env.example` ุฅูู `.env` ูุงููุฃ ุงูุจูุงูุงุช:

```bash
cp .env.example .env
```

### 5. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase

#### ุฃ. ุฅูุดุงุก ูุดุฑูุน Supabase
1. ุงุฐูุจ ุฅูู [supabase.com](https://supabase.com)
2. ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ ุฃู ุงุฏุฎู ูุญุณุงุจู
3. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ
4. ุงุญุตู ุนูู URL ู API Key ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน

#### ุจ. ุฅูุดุงุก ุงูุฌุฏุงูู
ุงูุณุฎ ูุงูุตู SQL ุงูุชุงูู ูู SQL Editor ูู Supabase:

```sql
-- ุฌุฏูู ุงููุณุชุฎุฏููู
CREATE TABLE IF NOT EXISTS users (
    user_id BIGINT PRIMARY KEY,
    username TEXT,
    first_name TEXT,
    last_name TEXT,
    language_code TEXT DEFAULT 'ar',
    is_bot BOOLEAN DEFAULT FALSE,
    is_premium BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุงููุฌููุนุงุช
CREATE TABLE IF NOT EXISTS chats (
    chat_id BIGINT PRIMARY KEY,
    title TEXT,
    chat_type TEXT DEFAULT 'group',
    username TEXT,
    description TEXT,
    welcome_enabled BOOLEAN DEFAULT TRUE,
    welcome_message TEXT,
    antiflood_enabled BOOLEAN DEFAULT TRUE,
    antilink_enabled BOOLEAN DEFAULT FALSE,
    antiword_enabled BOOLEAN DEFAULT FALSE,
    warns_enabled BOOLEAN DEFAULT TRUE,
    max_warns INTEGER DEFAULT 3,
    banned_words JSONB DEFAULT '[]',
    allowed_links JSONB DEFAULT '[]',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุงููุดุฑููู
CREATE TABLE IF NOT EXISTS admins (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    chat_id BIGINT NOT NULL,
    rank TEXT DEFAULT 'admin',
    title TEXT,
    can_delete_messages BOOLEAN DEFAULT TRUE,
    can_restrict_members BOOLEAN DEFAULT TRUE,
    can_promote_members BOOLEAN DEFAULT FALSE,
    can_change_info BOOLEAN DEFAULT FALSE,
    can_invite_users BOOLEAN DEFAULT TRUE,
    can_pin_messages BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, chat_id)
);

-- ุฌุฏูู ุงูุชุญุฐูุฑุงุช
CREATE TABLE IF NOT EXISTS warnings (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    chat_id BIGINT NOT NULL,
    admin_id BIGINT NOT NULL,
    reason TEXT,
    warn_count INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุงูุญุธุฑ
CREATE TABLE IF NOT EXISTS bans (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    chat_id BIGINT NOT NULL,
    admin_id BIGINT NOT NULL,
    reason TEXT,
    ban_type TEXT DEFAULT 'ban',
    duration INTEGER,
    expires_at TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุงูููุงุชุฑ
CREATE TABLE IF NOT EXISTS filters (
    id SERIAL PRIMARY KEY,
    chat_id BIGINT NOT NULL,
    keyword TEXT NOT NULL,
    response TEXT NOT NULL,
    filter_type TEXT DEFAULT 'text',
    media_file_id TEXT,
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุงูููุงุญุธุงุช
CREATE TABLE IF NOT EXISTS notes (
    id SERIAL PRIMARY KEY,
    chat_id BIGINT NOT NULL,
    name TEXT NOT NULL,
    content TEXT NOT NULL,
    note_type TEXT DEFAULT 'text',
    media_file_id TEXT,
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(chat_id, name)
);

-- ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช
CREATE TABLE IF NOT EXISTS settings (
    chat_id BIGINT PRIMARY KEY,
    settings_data JSONB DEFAULT '{}',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### 6. ุฅุนุฏุงุฏ ููู .env
```env
# ุฅุนุฏุงุฏุงุช ุงูุจูุช
BOT_TOKEN=your_bot_token_from_botfather
BOT_USERNAME=your_bot_username

# ุฅุนุฏุงุฏุงุช Supabase
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key

# ุฅุนุฏุงุฏุงุช ุงููุทูุฑูู (ุถุน ูุนุฑู ุชููุฌุฑุงู ุงูุฎุงุต ุจู)
SUDO_USERS=123456789

# ุฅุนุฏุงุฏุงุช ุงุฎุชูุงุฑูุฉ
REDIS_URL=redis://localhost:6379/0
WEBHOOK_URL=https://yourdomain.com
```

### 7. ุชุดุบูู ุงูุจูุช
```bash
python main.py
```

## ๐ ุงููุดุฑ ุนูู PythonAnywhere

### 1. ุฑูุน ุงููููุงุช
```bash
# ุฑูุน ุงููููุงุช ุฅูู PythonAnywhere
scp -r telegram_bot/ username@ssh.pythonanywhere.com:/home/username/
```

### 2. ุชุซุจูุช ุงููุชุทูุจุงุช
```bash
pip3.10 install --user -r requirements.txt
```

### 3. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
# ุฅูุดุงุก ููู .env ูู ุงููุฌูุฏ ุงูุฑุฆูุณู
nano .env
```

### 4. ุฅุนุฏุงุฏ Task ุงููุฌุฏููุฉ
ูู ููุญุฉ ุชุญูู PythonAnywhereุ ุงุฐูุจ ุฅูู "Tasks" ูุฃูุดุฆ task ุฌุฏูุฏุฉ:
```bash
cd /home/username/telegram_bot && python3.10 main.py
```

### 5. ุฅุนุฏุงุฏ ุงูููุจ ููู (ุงุฎุชูุงุฑู)
ูุงุณุชุฎุฏุงู webhooks ุจุฏูุงู ูู polling:
```python
# ูู web tabุ ุฃูุดุฆ Flask app
from main import bot, dp
from aiohttp import web
from aiohttp.web import Application

app = Application()
# ุฅุนุฏุงุฏ webhook
```

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู

### ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ

#### ุฃูุงูุฑ ุนุงูุฉ
- `/start` - ุจุฏุก ุงูุจูุช
- `/help` - ุนุฑุถ ุงููุณุงุนุฏุฉ
- `/admin` - ููุญุฉ ุงูุฅุฏุงุฑุฉ ุงูุฑุฆูุณูุฉ
- `/info` - ูุนูููุงุช ุงููุฌููุนุฉ
- `/ping` - ุงุฎุชุจุงุฑ ุงูุจูุช

#### ุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ
```bash
/ban @username ุณุจุจ ุงูุญุธุฑ          # ุญุธุฑ ูุณุชุฎุฏู
/unban @username                  # ุฅูุบุงุก ุญุธุฑ
/kick @username ุณุจุจ ุงูุทุฑุฏ         # ุทุฑุฏ ูุณุชุฎุฏู
/mute @username 30m ุณุจุจ ุงููุชู      # ูุชู ููุฏุฉ 30 ุฏูููุฉ
/unmute @username                 # ุฅูุบุงุก ูุชู
/warn @username ุณุจุจ ุงูุชุญุฐูุฑ        # ุชุญุฐูุฑ ูุณุชุฎุฏู
/unwarn @username                 # ูุณุญ ุงูุชุญุฐูุฑุงุช
/pin                             # ุชุซุจูุช ุฑุณุงูุฉ (ุฑุฏ ุนูู ุงูุฑุณุงูุฉ)
/unpin                           # ุฅูุบุงุก ุชุซุจูุช
```

#### ุฃูุงูุฑ ุงูุญูุงูุฉ
```bash
/protection                      # ููุญุฉ ุฅุนุฏุงุฏุงุช ุงูุญูุงูุฉ
/antiflood                       # ุชุดุบูู/ุฅููุงู ููุงูุญุฉ ุงูุณุจุงู
/antilink                        # ุชุดุบูู/ุฅููุงู ููุน ุงูุฑูุงุจุท
/antiword                        # ุชุดุบูู/ุฅููุงู ููุน ุงููููุงุช
/addword ูููุฉ_ูุญุธูุฑุฉ              # ุฅุถุงูุฉ ูููุฉ ูุญุธูุฑุฉ
/removeword ูููุฉ_ูุญุธูุฑุฉ           # ุฅุฒุงูุฉ ูููุฉ ูุญุธูุฑุฉ
/addlink example.com             # ุฅุถุงูุฉ ุฑุงุจุท ูุณููุญ
```

#### ุฃูุงูุฑ ุงูุชุฑุญูุจ
```bash
/welcome                         # ุฅุนุฏุงุฏุงุช ุงูุชุฑุญูุจ
/setwelcome ูุฑุญุจุงู {first_name}!  # ุชุนููู ุฑุณุงูุฉ ุชุฑุญูุจ
/resetwelcome                    # ุฅุนุงุฏุฉ ุชุนููู ููุงูุชุฑุงุถู
/togglewelcome                   # ุชุดุบูู/ุฅููุงู ุงูุชุฑุญูุจ
/testwelcome                     # ุงุฎุชุจุงุฑ ุฑุณุงูุฉ ุงูุชุฑุญูุจ
```

### ุชูุณููุงุช ุงูููุช
- `s` = ุซูุงูู
- `m` = ุฏูุงุฆู  
- `h` = ุณุงุนุงุช
- `d` = ุฃูุงู
- `w` = ุฃุณุงุจูุน

**ุฃูุซูุฉ:**
- `30s` = 30 ุซุงููุฉ
- `5m` = 5 ุฏูุงุฆู
- `2h` = ุณุงุนุชุงู
- `1d` = ููู ูุงุญุฏ

### ูุชุบูุฑุงุช ุฑุณุงุฆู ุงูุชุฑุญูุจ
- `{first_name}` - ุงูุงุณู ุงูุฃูู
- `{last_name}` - ุงูุงุณู ุงูุฃุฎูุฑ
- `{full_name}` - ุงูุงุณู ุงููุงูู
- `{username}` - ุงุณู ุงููุณุชุฎุฏู
- `{user_id}` - ูุนุฑู ุงููุณุชุฎุฏู
- `{chat_title}` - ุงุณู ุงููุฌููุนุฉ
- `{chat_id}` - ูุนุฑู ุงููุฌููุนุฉ

**ูุซุงู ุนูู ุฑุณุงูุฉ ุชุฑุญูุจ:**
```
๐ ุฃููุงู ูุณููุงู {first_name}!

ูุฑุญุจุงู ุจู ูู {chat_title}
ูุชููู ูู ููุชุงู ููุชุนุงู ูุนูุง ๐

ูุนุฑูู: {user_id}
```

## ๐ง ุงูุชุฎุตูุต ูุงูุชุทููุฑ

### ูููู ุงููุดุฑูุน
```
telegram_bot/
โโโ main.py                 # ููู ุงูุจูุช ุงูุฑุฆูุณู
โโโ config/                 # ุฅุนุฏุงุฏุงุช ุงูุจูุช
โ   โโโ __init__.py
โ   โโโ config.py
โโโ database/               # ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ __init__.py
โ   โโโ database.py
โ   โโโ models.py
โโโ handlers/               # ูุนุงูุฌุงุช ุงูุฃูุงูุฑ
โ   โโโ __init__.py
โ   โโโ admin_handlers.py
โ   โโโ protection_handlers.py
โ   โโโ welcome_handlers.py
โ   โโโ general_handlers.py
โ   โโโ callback_handlers.py
โโโ filters/                # ููุงุชุฑ ูุฎุตุตุฉ
โ   โโโ __init__.py
โ   โโโ admin_filter.py
โโโ keyboards/              # ููุญุงุช ุงูููุงุชูุญ
โ   โโโ __init__.py
โ   โโโ admin_keyboards.py
โโโ utils/                  # ูุธุงุฆู ูุณุงุนุฏุฉ
โ   โโโ __init__.py
โ   โโโ helpers.py
โโโ requirements.txt        # ูุชุทูุจุงุช Python
โโโ .env.example           # ูุซุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ README.md              # ูุฐุง ุงูููู
```

### ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

#### 1. ุฅูุดุงุก ูุนุงูุฌ ุฌุฏูุฏ
```python
# ูู handlers/new_feature.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command

new_feature_router = Router()

@new_feature_router.message(Command("newcommand"))
async def new_command(message: Message):
    await message.reply("ููุฒุฉ ุฌุฏูุฏุฉ!")
```

#### 2. ุชุณุฌูู ุงููุนุงูุฌ ูู main.py
```python
from handlers.new_feature import new_feature_router

# ูู main.py
dp.include_router(new_feature_router)
```

### ุชุฎุตูุต ุงูุฑุณุงุฆู
ููููู ุชุนุฏูู ุงูุฑุณุงุฆู ูู `config/config.py`:
```python
EMOJI = {
    "check": "โ",
    "cross": "โ",
    # ... ุฅุถุงูุฉ ุฑููุฒ ุฌุฏูุฏุฉ
}
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### 1. ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```
ุฎุทุฃ: connection refused
```
**ุงูุญู:** ุชุฃูุฏ ูู ุตุญุฉ `SUPABASE_URL` ู `SUPABASE_KEY`

#### 2. ุงูุจูุช ูุง ูุฑุฏ ุนูู ุงูุฃูุงูุฑ
```
ุงูุจูุช ุบูุฑ ูุดุท
```
**ุงูุญู:** 
- ุชุฃูุฏ ูู ุตุญุฉ `BOT_TOKEN`
- ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุจูุช ูููุฌููุนุฉ ููุดุฑู
- ุชุญูู ูู ุงูุณุฌูุงุช (logs)

#### 3. ุตูุงุญูุงุช ุบูุฑ ูุงููุฉ
```
ููุณ ูุฏูู ุตูุงุญูุฉ
```
**ุงูุญู:**
- ุฃุถู ูุนุฑูู ุฅูู `SUDO_USERS`
- ุชุฃูุฏ ูู ูููู ูุดุฑู ูู ุงููุฌููุนุฉ

### ุชูุนูู ุงูุณุฌูุงุช ุงูุชูุตูููุฉ
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุทุฑู ุงูุชูุงุตู
- **GitHub Issues**: ูุชูุงุฑูุฑ ุงูุฃุฎุทุงุก ูุงูุงูุชุฑุงุญุงุช
- **Telegram**: [@your_support_username]
- **Email**: support@yourproject.com

### ุงููุณุงููุฉ ูู ุงููุดุฑูุน
1. Fork ุงููุดุฑูุน
2. ุฃูุดุฆ ูุฑุน ุฌุฏูุฏ ููููุฒุฉ
3. ุงูุชุจ ุงูููุฏ ูุงุฎุชุจุฑู
4. ุฃุฑุณู Pull Request

### ุชุฑุฎูุต ุงููุดุฑูุน
ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช [MIT License](LICENSE)

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ููุฒุงุช ูุงุฏูุฉ
- [ ] ูุธุงู ุงูููุงุท ูุงูููุงูุขุช
- [ ] ุชูุงูู ูุน APIs ุฎุงุฑุฌูุฉ
- [ ] ููุญุฉ ุชุญูู ููุจ
- [ ] ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงููุชูุฏู
- [ ] ุฏุนู ููุงุนุฏ ุจูุงูุงุช ุฅุถุงููุฉ
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ
- [ ] ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- [ ] ูุธุงู ุงูุจูุงุบุงุช

### ุณุฌู ุงูุชุบููุฑุงุช
#### v1.0.0 (2024-01-XX)
- ุฅุทูุงู ุงููุณุฎุฉ ุงูุฃููู
- ููุฒุงุช ุงูุฅุฏุงุฑุฉ ุงูุฃุณุงุณูุฉ
- ูุธุงู ุงูุญูุงูุฉ
- ุฑุณุงุฆู ุงูุชุฑุญูุจ
- ูุงุฌูุฉ ุฅุฏุงุฑูุฉ ุชูุงุนููุฉ

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ MiniMax Agent** ๐ค

ููุญุตูู ุนูู ุฃุญุฏุซ ุงูุชุญุฏูุซุงุชุ ุชุงุจุน ุงููุดุฑูุน ุนูู GitHub.
